<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Domenico Projects</title>
    <style>
        body { font-family: system-ui, -apple-system, sans-serif; background: #111; color: #eee; padding: 1rem; }
        h1 { font-size: 1.5rem; margin-bottom: 1rem; }
        button { padding: 0.6rem 1rem; font-size: 1rem; margin-bottom: 1rem; }
        ul { list-style: none; padding: 0; }
        li { padding: 0.5rem 0; border-bottom: 1px solid #333; }
        a { color: #0af; text-decoration: none; }
    </style>
</head>
<body>
    <h1>Domenico Projects</h1>
    <button onclick="createProject()">New Project</button>
    <ul id="projects-list"></ul>

    <script>
        async function fetchProjects() {
            const res = await fetch("/projects");
            const projects = await res.json();
            const ul = document.getElementById("projects-list");
            ul.innerHTML = "";
            projects.forEach(p => {
                const li = document.createElement("li");
                li.innerHTML = `<a href="/projects/${p.id}">${p.slug}</a>`;
                ul.appendChild(li);
            });
        }

        async function createProject() {
            const slug = prompt("Enter project slug:");
            if (!slug) return;
            const res = await fetch("/projects", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({slug})
            });
            if (res.ok) {
                await fetchProjects();
            } else {
                const err = await res.json();
                alert("Error: " + JSON.stringify(err.detail));
            }
        }

        fetchProjects();
    </script>
</body>
</html>